!!! 5
%html
  %head
    %meta{ charset: "utf-8" }
    %meta{ http_equiv: 'X-UA-Compatible', content: 'IE=edge;chrome=1' }
    %meta{ content: 'width=device-width, initial-scale=1, maximum-scale=1', name: 'viewport' }
    %meta{ content: "Middleman #{Middleman::VERSION}", name: 'generator' }
    %link{ rel: 'author', href: 'https://plus.google.com/+AtsushiNAGASE' }
    %title
      - if current_article
        = "#{current_article.title} - "
      - elsif content_for?(:title)
        = "#{yield_content(:title)} - "
      = "ja.ngs.io"
    - ogp_tags do|name, value|
      %meta{  property: name, content: value }
    - %w{ bootstrap application syntax font-awesome }.each do|css|
      = stylesheet_link_tag css
    - if current_page.data.description
      %meta{ content: current_page.data.description, name: "description" }
    - else
      %meta{ content: "プログラミング、ガジェット、電子工作、ロードバイク、ランニング、旅行など", name: "description" }
    - if current_page.data.keywords
      %meta{ content: current_page.data.page.keywords, name: "keywords" }
    %meta{ content: "長瀬 敦史", name: "author" }
    = feed_tag :atom, "#{blog.options.prefix.to_s}/feed.xml", title: "Atom Feed"
  %body
    .container
      .row
        - if content_for? :main
          = yield_content :main
        - else
          %main.col-md-9{ role: 'main' }
            = yield
        %aside.col-md-3
          %h2 ナビゲーション
          %ol.nav{ itemscope: "itemscope", itemtype: "http://www.schema.org/SiteNavigationElement" }
            %li
              = link_to '/', itemprop: 'url' do
                %span.glyphicon.glyphicon-home
                &nbsp;
                %span{ itemprop: 'name' } ホーム
              = link_to '/about', itemprop: 'url' do
                %span.glyphicon.glyphicon-user
                &nbsp;
                %span{ itemprop: 'name' } 自己紹介
              = link_to 'http://ngs.io/', itemprop: 'url' do
                %span.glyphicon.glyphicon-pencil
                &nbsp;
                %span{ itemprop: 'name' } Blog (English)
          %h2 最近の記事
          %ol.nav
            - blog.articles.select {|a| a.data[:public] }.sort { |x,y| y.date <=> x.date }[0...10].each do |article|
              %li
                = link_to article do
                  %span.title= article.title
                  %time= article.date.strftime('%Y/%m/%d')
          %h2 タグ
          %ol.nav
            - blog.tags.sort.each do |tag, articles|
              %li
                = link_to tag_path(tag) do
                  %span.glyphicon.glyphicon-tag
                  = tag
                  %span.badge.pull-right= articles.size
          %h2 月別
          %ol.nav
            - blog.articles.select {|a| a.data[:public] }.group_by {|a| a.date.year }.each do |year, year_articles|
              - year_articles.group_by {|a| a.date.month }.each do |month, month_articles|
                %li
                  = link_to blog_month_path(year, month) do
                    = sprintf '%04d年%02d月', year, month
                    %span.badge.pull-right= month_articles.size
      %footer.row
        %address.col-md-12<
          Proudly hosted by
          = link_to 'GitHub Pages', 'http://pages.github.com', rel: 'nofollow'
          \.&nbsp;
          Theme by
          = link_to 'United', 'http://bootswatch.com/united/', rel: 'nofollow'
          from
          = link_to 'Bootswatch', 'http://bootswatch.com/', rel: 'nofollow'
          \.&nbsp;
          Copyright &copy; #{ Time.now.year }&nbsp;
          = link_to 'Atsushi Nagase', 'http://ngs.io/'
          \.

    = google_analytics_tag


- content_for :title do
  = "ja.ngs.io"